= Report on the current status of the J-Confs project
:toc: preamble

It is a *conference travel management tool* for researchers at Paris-Dauphine PSL University.

The project has been developed since 2018. It includes *7 packages* including a package from an external library (Geocode).

This year, the team is composed of 5 collaborators :

* Majid ACHRIA
* Sebastien BOURG
* Anis HAMOUNI
* Floryan KIEFFER
* Anis ZOUARI


We started by create a fork of the current projet. The URL of the fork is : https://github.com/sebastienbourg/J-Confs

After that we imported the project to Eclipse connected to git in order to work together on it.



== General View

=== Use case diagram


image:https://imgur.com/iqFlv8n.png[alt="General View.",width=80%,height=80%, align="center"]

This diagram corresponds to the somewhat simplified use of the application. The purpose of the application is to allow the user (researcher, user of the administration) to create a conference. So he can look for a researcher and assign him a conference. It can then generate a mission order for a researcher or a young researcher. The user can also visualize all conferences in an online calendar. Futhermore, he can delete or edit conferences.

We plan to add a feature to show the route (optimised) between his location and the location of the conference.

=== Package diagram


image:https://imgur.com/pisiwgI.png[alt="Package diagram",width=80%,height=80%, align="center"]

Here you have a package diagram where we can see package dependancies. As usual, the package which is the most dependant is the GUI one.


== Geocode package

=== Class diagram

image:https://imgur.com/4NpylsX.png[alt="Geocode class diagram",width=80%,height=80%, align="center"]


In this package that is represented in Papyrus, we can see 5 classes and one enumeration. The main class of this package is GeoName and others classes are here to help to generate a GeoName.


=== What we plan to do 

We think that we will delete it because we may change it into a GeoTools package. We need to compare them. LocationIQ API may help us to do the same thing.


== Researcher package

=== Use case diagram

image:https://i.imgur.com/nNhMJRv.png[alt="Researcher use case diagram",width=80%,height=80%, align="center"]

The package Researcher allows the user to create a Researcher object by connecting to dauphine online phone book and get information from a login enter by the user.

=== Class diagram

image:https://i.imgur.com/uBbBWCI.png[alt="Researcher class diagram",width=80%,height=80%, align="center"]

In this package that is represented in Papyrus, we can find 2 classes. One that is immutable (Researcher) and the other that help to create the object that will not change (ResearcherBuilder).

=== What we plan to do 

There is some informations that isn't created yet. We plan to handle the dauphine authentication. That's why we can find storePassword and lookPassword. When we launched the application the first time we have noticed that the link with Dauphine's phone book didn't work. So we look at dauphine's website and we find an exploit on the website to get information. So we have edited the link in ResearcherBuilder and now it works !

We want to add some attributes in Researcher like listJourney and listExpense. So we will have function some new function in ResearcherBuilder -> add an expense/journey, delete an expense/journey, see an expense/journey, modify an expense/journey.


== Calendar package

=== Use case diagram

image:https://imgur.com/Bhw0pv9.png[alt="Calendar use case diagram",width=80%,height=80%, align="center"]

The package calendar permits to use an online calendar or to use a local file file calendar with limited options. To use an online calendar you need first, to set credential providers in order to connect to the calendar. After that, you can add, edit, delete, and get online conferences.
By connecting with a local calendar you can only create a conference.

=== Class diagram

image:https://imgur.com/kSxS61R.png[alt="Calendar class diagram",width=80%,height=80%, align="center"]

In this package that is represented in Papyrus, we have 2 classes : CalendarOnline and ReadCalendarFiles. CalendarOnline helps us to connect to Fruux and store CalendarOnline. ReadCalendarFiles helps us to create conference and read Calendar.

=== What we plan to do 

We want to add a function send to git and a function restore from git in CalendarOnline. We also need to add a function that help us to know if the calendar is writeable/readable. We have to add mergeCalendar, a function that merge all calendars online.
Another thing that has been added is the possibility to read from classpath and a connector that help the user to connect to calendar.

== Conference Package

=== Use case diagram

image:https://i.imgur.com/esZRtLn.png[alt="Conference use case diagram",width=80%,height=80%, align="center"]

The package conference is use to create, search or delete a conference. It needs to be as a particular format call Vevent component. There is different way to search a conference such as by file path in order to search conference in a local file, by date interval or by title. 

=== Class diagram

image:https://i.imgur.com/b0qE8NM.png[alt="Conference class diagram",width=80%,height=80%, align="center"]

This package groups together classes allowing to manage conferences as its name indicates. 
Indeed it contains the classes allowing to create conferences. 
For example : 

* The conferenceReader class for example which reads information from a calendar file and creates a conference object.
* The conference class defines what a conference is with its attributes and constructor.
* The Retriever interface reads conference data and return a set of conferences.
* The conferenceShower class show Conferences data.
* The conferenceWriter class Delete the conference of the ics file (if it exists), Add the conference in the ics file file (if it exists) and Save the given conference in the ics File. 
* The invalidConferenceFormatException class custom exception use for a conference creation.


=== What we plan to do 

In the Conference packages, there are some changes to be made to improve the code, make it "cleaner", improve functions or remove unnecessary things.
There are for example : 

* Delete the conferencesRetriever class which allows to generate a conference list from entered data. But we could, instead of dedicating a whole class to this part, simply implement it in another class.
* Complexify the recording of a price. Indeed, we would like to complicate the registrationFee attribute which concerns the management of prices. We will have to make this attribute take into account as a parameter a researcher who will return a price depending on the status of the person who reserves and the reservation period.


== Document Package

=== Use case diagram

image:https://i.imgur.com/3pGfm3R.png[alt="Document use case diagram",width=80%,height=80%, align="center"]

The package document is use to generate documents in resources folder. He is in charge of generate mission order for example after the user fill all information in the application.

=== Class diagram

image:https://i.imgur.com/leIpryJ.png[alt="Document class diagram",width=80%,height=80%, align="center"]

This package mainly deals with the management of mission orders.
For example: 
* The generateOM class fills a searcher Mission Order.
* The generateOMYS class fills a searcher Mission Order but for a young searcher.
* The MissionOrder class generate a spreed sheet document about a mission order.


=== What we plan to do 

In the package document, there is also some modifications to do to improve the code. For example : 

* Investigate the existence of a more modern API for manipulating OpenDocument documents. We are therefore studying the different existing solutions in order to choose the one that would best suit our project.
* Set up the generation and storage of the Mission Order (OM) or JC request. If one already exists, it goes into the history. We could add a JC class and put generate and store functions in it and possibly add attriubuts. We would have to add a store function in generateOM and generateOMYS. We're also thinking about storing everything on git.
* Extract a specialized program dealing with LibreOffice document generation and create its own GitHub repository. To do so, you would have to create a new class containing this program. I've already created a github repository and let's think about it.

== Gui Package

=== Use case diagram

image:https://i.imgur.com/wQBKK79.png[alt="Gui use case diagram",width=80%,height=80%, align="center"]

The GUI package allows you to set up a home machine interface and simplify the use of the application. It represents all the interactions between the use cases of this package. This package allows the user to set up an interface containing widgets that allow them to perform several actions described for the most part in other use case diagrams. The package therefore allows to associate events and methods. The application is currently able to display two windows that each allow you to perform different actions such as creating a conference or displaying a list of conferences based on certain information printered.


=== Class diagram

image:https://imgur.com/ahH4YXl.png[alt="Calendar View.",width=80%,height=80%, align="center"]

The GUI package is made up of 5 classes.

*Guiconference*

It represents the interface for entering conferences by researcher who should enter his information (login, name, surname..., this information can be retrieved just with the login of the researcher thanks to the class _researcher.ResearcherBuilder_), then enter the information about the conference (place, start date and end date)

*GuiListConferences*

It allows to display the different conferences of a researcher and the possibility to make a change on a conference thanks to the method of the class _conference.ConferenceWriter_.

== Map Package

=== Use case diagram

image:https://i.imgur.com/7cJZn2p.png[alt="Map use case diagram",width=80%,height=80%, align="center"]

The package Map permits to download a file from an URL and put it in resources folder of the project. It also permits to fill a document call “papier_a_en_tete.fodt” (using regex). The information writing in the document are : Researcher’s first name, last name, phone number, Function and e-mail get from a researcher object. There is also a class to define a point on a map, the attribute that must be defined are the point name, the longitude and the latitude of the point. The default point is Paris with latitude equals to 48.866667 and longitude equals to 2.333333
In order to define a path step, with is something like “starting from Paris to Marseille in train”, we need to define a starting point, an arrival point and a transport type.


=== Class diagram

image:https://imgur.com/zHdbk1Z.png[alt="Calendar View.",width=80%,height=80%, align="center"]


*geopoint*

Represents a point with name, longitude and latitude.

*pathstep*

Represents a path with a starting *geopoint* and an arrival *geopoint* with a means of transport.

=== What we plan to do 

* Add a price, a start date and return date in the pathstep class and a display method, and thanks to an API we calculate the price of the trip between the two points and with the means of transport that already exists as attribute and the two dates, with the display function we display the itinerary.

* API will be managed as an interface that will be implemented by the pathstep class, or just methods that will be added to the pathstep class.

* Create a path class which will contain a departure location, an arrival location which is the conference location and a list of pathsteps, each ending where the next one begins, each beginning after the end date of the previous one, and beginning at the departure location and ending at the conference location, a price which will be the minimum between the sum of the pathstep prices and the price of the direct route. 